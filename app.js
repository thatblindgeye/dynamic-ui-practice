!function(){"use strict";(()=>{const e=document.querySelector(".more-links-button"),t=document.querySelector(".more-container"),n=document.querySelector(".more-links"),r=()=>{0===n.children.length?(t.style.display="none",e.setAttribute("aria-expanded","false"),n.classList.remove("visible")):t.style.display="block"},s=()=>{const e=document.getElementById("upper-nav").offsetWidth,r=t.offsetWidth+10*parseFloat(getComputedStyle(document.documentElement).fontSize),a=document.querySelector(".primary-links"),i=document.querySelectorAll(".primary-links > li:not(.more-container)"),o=i.length;if(a.offsetWidth>=e-r&&o)n.children.length?n.insertBefore(i[o-1],n.children[0]):n.appendChild(i[o-1]),s();else{if(!n.children.length)return;a.insertBefore(n.children[0],t)}};s(),r(),window.addEventListener("resize",(()=>{s(),r()}));const a=document.getElementsByClassName("dropdown-button"),i=document.getElementsByClassName("dropdown-links"),o=()=>{Array.from(i).forEach((e=>{e.classList.contains("visible")?(e.previousElementSibling.setAttribute("aria-expanded","true"),e.previousElementSibling.children[0].textContent="expand_less"):(e.previousElementSibling.setAttribute("aria-expanded","false"),e.previousElementSibling.children[0].textContent="expand_more")}))},l=e=>{Array.from(i).forEach((t=>{t===e.target.nextElementSibling||e.target.parentElement.parentElement.classList.contains("dropdown-links")||t.classList.remove("visible")})),o()},c=e=>{e.target.nextElementSibling.classList.toggle("visible"),o()};Array.from(a).forEach((e=>{e.addEventListener("click",(e=>{l(e),c(e)}))})),Array.from(a).forEach((e=>{e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),l(e),c(e))}))})),window.addEventListener("click",(e=>{e.target.classList.contains("dropdown-button")||Array.from(i).forEach((e=>{e.classList.remove("visible")})),o()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(Array.from(i).forEach((e=>{e.classList.remove("visible")})),o())})),window.addEventListener("keydown",(e=>{"Tab"===e.key&&(e=>{const t=document.querySelector(".visible");if(t){const n=t.children,r=n[n.length-1].children[0];document.activeElement!==r||e.shiftKey?document.activeElement===t.previousElementSibling&&e.shiftKey&&(r.focus(),e.preventDefault()):(t.previousElementSibling.focus(),e.preventDefault())}})(e)}))})(),(()=>{const e=[{url:"assets/images/kate-stone-matheson-uy5t-CJuIK4-unsplash.jpg",alt:"A mostly white cat sleeping beneath bed covers.","credit link":"https://unsplash.com/@kstonematheson","credit name":"Kate Stone Matheson on Unsplash"},{url:"assets/images/daria-shatova-46TvM-BVrRI-unsplash.jpg",alt:"A small cat laying upside down, staring into the camera with their paws stretched out.","credit link":"https://unsplash.com/@dariasha911","credit name":"Daria Shatova on Unsplash"},{url:"assets/images/jae-park-7GX5aICb5i4-unsplash.jpg",alt:"A white and tan cat looking into the camera with their mouth open mid-meow.","credit link":"https://unsplash.com/@jaehunpark","credit name":"Jae Park on Unsplash"},{url:"assets/images/justin-sinclair-0ptOFauN7n8-unsplash.jpg",alt:"Two calico cats, one walking towards the camera and the other sitting and staring at a wall.","credit link":"https://unsplash.com/@justinsinclair","credit name":"Justin Sinclair on Unsplash"},{url:"assets/images/marko-blazevic-zBvVuRJ71vU-unsplash.jpg",alt:"A gray cat standing on their hind legs, with their front paws bent in front of them.","credit link":"https://unsplash.com/@kerber","credit name":"Marko Blažević on Unsplash"}];e.forEach(((e,t)=>{const n=document.createElement("span");n.className="dot",n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.setAttribute("aria-label",`select image ${t+1}`),document.querySelector(".slider-dots").appendChild(n)}));const t=document.getElementsByClassName("dot"),n=(e,t)=>{i=e,h()};Array.from(t).forEach(((e,t)=>{e.addEventListener("click",(()=>{n(t)})),e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),n(t))}))}));const r=document.querySelector(".next-arrow"),s=document.querySelector(".previous-arrow"),a=e=>{console.log(e.currentTarget),e.currentTarget===r?(c(),h()):e.currentTarget===s&&(d(),h())};r.addEventListener("click",a),r.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),a(e))})),s.addEventListener("click",a),s.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),a(e))}));let i=0;const o=document.querySelector(".current-image"),l=()=>{const n=document.querySelector("#credit-link");var r;o.setAttribute("src",e[i].url),o.setAttribute("alt",e[i].alt),n.setAttribute("href",e[i]["credit link"]),n.textContent=e[i]["credit name"],r=i,Array.from(t).forEach((e=>{e.classList.remove("active-dot")})),t[r].classList.add("active-dot")},c=()=>{i===e.length-1?i=0:i++},d=()=>{0===i?i=e.length-1:i-=1};let u;const m=e=>{u?(clearInterval(u),u=null):u=setInterval((function(){c(),l()}),5e3)},h=()=>{u&&m(),l(),m()};l(),m(),o.addEventListener("click",m),o.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),m())}))})(),(()=>{const e=document.querySelector(".theme-toggle"),t=document.querySelector(".github-logo"),n=()=>{"dark"===document.documentElement.getAttribute("theme")?(document.documentElement.setAttribute("theme","light"),t.setAttribute("src","assets/GitHub-Mark-32px.png")):(document.documentElement.setAttribute("theme","dark"),t.setAttribute("src","assets/GitHub-Mark-Light-32px.png"))};n(),e.addEventListener("click",n),e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),n())}))})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbmF2YmFyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbWFnZS1zbGlkZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIm1vcmVCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtb3JlQ29udGFpbmVyIiwibW9yZUxpbmtzTGlzdCIsInRvZ2dsZU1vcmVWaXNpYmlsaXR5IiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJzdHlsZSIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtb3ZlTGlua3MiLCJuYXZXaWR0aCIsImdldEVsZW1lbnRCeUlkIiwib2Zmc2V0V2lkdGgiLCJzdG9wV2lkdGgiLCJwYXJzZUZsb2F0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRvY3VtZW50RWxlbWVudCIsImZvbnRTaXplIiwidmlzaWJsZUNvbnRhaW5lciIsInZpc2libGVMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ2aXNpYmxlTGVuZ3RoIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZHJvcGRvd25CdXR0b25zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImRyb3Bkb3duTGlzdHMiLCJjaGVja0FyaWFFeHBhbmRlZCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJpdGVtIiwiY29udGFpbnMiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJoaWRlRHJvcGRvd25MaW5rcyIsImUiLCJ0YXJnZXQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJwYXJlbnRFbGVtZW50IiwidG9nZ2xlRHJvcGRvd25MaW5rcyIsInRvZ2dsZSIsImtleSIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudERyb3Bkb3duIiwiY3VycmVudExpc3QiLCJsYXN0SXRlbSIsImFjdGl2ZUVsZW1lbnQiLCJzaGlmdEtleSIsImZvY3VzIiwidHJhcEZvY3VzIiwiaW1hZ2VzIiwidXJsIiwiYWx0IiwiaW1hZ2UiLCJpbmRleCIsImRvdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJkb3RzIiwic2VsZWN0SW1hZ2VCeURvdCIsInNlbGVjdGlvbiIsImltYWdlSW5kZXgiLCJyZXNldEN5Y2xlIiwibmV4dEFycm93IiwicHJldmlvdXNBcnJvdyIsInNlbGVjdEltYWdlQnlBcnJvdyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50VGFyZ2V0IiwiaW5jcmVhc2VJbWFnZUluZGV4IiwiZGVjcmVhc2VJbWFnZUluZGV4IiwiY3VycmVudEltYWdlIiwiZGlzcGxheUltYWdlIiwiaW1hZ2VDcmVkaXQiLCJpbmRleElucHV0IiwiYWRkIiwiY3ljbGVTdGF0ZSIsImNoYW5nZUN5Y2xlU3RhdGUiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ0aGVtZVRvZ2dsZSIsImdpdGh1YkxvZ28iLCJjaGFuZ2VUaGVtZSIsImdldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6InlCQUVzQixNQUNwQixNQUlNQSxFQUFhQyxTQUFTQyxjQUFjLHNCQUNwQ0MsRUFBZ0JGLFNBQVNDLGNBQWMsbUJBQ3ZDRSxFQUFnQkgsU0FBU0MsY0FBYyxlQUN2Q0csRUFBdUIsS0FDVyxJQUFsQ0QsRUFBY0UsU0FBU0MsUUFDekJKLEVBQWNLLE1BQU1DLFFBQVUsT0FDOUJULEVBQVdVLGFBQWEsZ0JBQWlCLFNBQ3pDTixFQUFjTyxVQUFVQyxPQUFPLFlBRS9CVCxFQUFjSyxNQUFNQyxRQUFVLFNBSTVCSSxFQUFZLEtBQ2hCLE1BQ01DLEVBRFNiLFNBQVNjLGVBQWUsYUFDZkMsWUFDbEJDLEVBQVlkLEVBQWNhLFlBQWlDLEdBbkJwREUsV0FBV0MsaUJBQWlCbEIsU0FBU21CLGlCQUFpQkMsVUFvQjdEQyxFQUFtQnJCLFNBQVNDLGNBQWMsa0JBQzFDcUIsRUFBZXRCLFNBQVN1QixpQkFBaUIsNENBQ3pDQyxF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LFNBQy9DOEUsRUFBVzlFLGFBQWEsTUFBTyxpQ0FFL0JULFNBQVNtQixnQkFBZ0JWLGFBQWEsUUFBUyxRQUMvQzhFLEVBQVc5RSxhQUFhLE1BQU8sdUNBSW5DK0UsSUFDQUYsRUFBWTFELGlCQUFpQixRQUFTNEQsR0FDdENGLEVBQVkxRCxpQkFBaUIsV0FBWWEsSUFDekIsTUFBVkEsRUFBRU0sS0FBeUIsVUFBVk4sRUFBRU0sTUFDckJOLEVBQUVPLGlCQUNGd0MsU0FuQmUsRyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgdXBwZXJOYXZMaW5rcyA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbnZlcnRSZW1Ub1BpeGVscyA9IChyZW0pID0+IHsgICAgXG4gICAgcmV0dXJuIHJlbSAqIHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmZvbnRTaXplKTtcbiAgfTtcblxuICBjb25zdCBtb3JlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb3JlLWxpbmtzLWJ1dHRvblwiKTtcbiAgY29uc3QgbW9yZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9yZS1jb250YWluZXJcIik7XG4gIGNvbnN0IG1vcmVMaW5rc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vcmUtbGlua3NcIik7XG4gIGNvbnN0IHRvZ2dsZU1vcmVWaXNpYmlsaXR5ID0gKCkgPT4ge1xuICAgIGlmIChtb3JlTGlua3NMaXN0LmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbW9yZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBtb3JlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgIG1vcmVMaW5rc0xpc3QuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vcmVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbW92ZUxpbmtzID0gKCkgPT4ge1xuICAgIGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXBwZXItbmF2XCIpO1xuICAgIGNvbnN0IG5hdldpZHRoID0gbmF2YmFyLm9mZnNldFdpZHRoO1xuICAgIGNvbnN0IHN0b3BXaWR0aCA9IG1vcmVDb250YWluZXIub2Zmc2V0V2lkdGggKyBjb252ZXJ0UmVtVG9QaXhlbHMoMTApO1xuICAgIGNvbnN0IHZpc2libGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaW1hcnktbGlua3NcIik7XG4gICAgY29uc3QgdmlzaWJsZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcmltYXJ5LWxpbmtzID4gbGk6bm90KC5tb3JlLWNvbnRhaW5lcilcIik7XG4gICAgY29uc3QgdmlzaWJsZUxlbmd0aCA9IHZpc2libGVMaW5rcy5sZW5ndGg7XG4gICAgY29uc3QgdmlzaWJsZVdpZHRoID0gdmlzaWJsZUNvbnRhaW5lci5vZmZzZXRXaWR0aDtcblxuICAgIGlmICh2aXNpYmxlV2lkdGggPj0gbmF2V2lkdGggLSBzdG9wV2lkdGggJiYgdmlzaWJsZUxlbmd0aCkge1xuICAgICAgaWYgKCFtb3JlTGlua3NMaXN0LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBtb3JlTGlua3NMaXN0LmFwcGVuZENoaWxkKHZpc2libGVMaW5rc1t2aXNpYmxlTGVuZ3RoIC0gMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWRkIHRvIE1vcmUgbGlzdCBpbiBvcmlnaW5hbCBuYXYgb3JkZXJcbiAgICAgICAgbW9yZUxpbmtzTGlzdC5pbnNlcnRCZWZvcmUodmlzaWJsZUxpbmtzW3Zpc2libGVMZW5ndGggLSAxXSwgbW9yZUxpbmtzTGlzdC5jaGlsZHJlblswXSk7XG4gICAgICB9O1xuICAgICAgLy8gcmVydW4gZnVuY3Rpb24gdW50aWwgdmlzaWJsZVdpZHRoIGlzIDwgbmF2V2lkdGggKyBzdG9wV2lkdGhcbiAgICAgIG1vdmVMaW5rcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIW1vcmVMaW5rc0xpc3QuY2hpbGRyZW4ubGVuZ3RoKSByZXR1cm47XG4gICAgICB2aXNpYmxlQ29udGFpbmVyLmluc2VydEJlZm9yZShtb3JlTGlua3NMaXN0LmNoaWxkcmVuWzBdLCBtb3JlQ29udGFpbmVyKTtcbiAgICB9O1xuICB9O1xuXG4gIG1vdmVMaW5rcygpO1xuICB0b2dnbGVNb3JlVmlzaWJpbGl0eSgpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgbW92ZUxpbmtzKCk7XG4gICAgdG9nZ2xlTW9yZVZpc2liaWxpdHkoKTtcbiAgfSk7XG5cblxuICBjb25zdCBkcm9wZG93bkJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZHJvcGRvd24tYnV0dG9uXCIpO1xuICBjb25zdCBkcm9wZG93bkxpc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRyb3Bkb3duLWxpbmtzXCIpO1xuXG4gIGNvbnN0IGNoZWNrQXJpYUV4cGFuZGVkID0gKCkgPT4ge1xuICAgIEFycmF5LmZyb20oZHJvcGRvd25MaXN0cykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwidmlzaWJsZVwiKSkge1xuICAgICAgICBpdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XG4gICAgICAgIGl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5jaGlsZHJlblswXS50ZXh0Q29udGVudCA9IFwiZXhwYW5kX2xlc3NcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIGl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5jaGlsZHJlblswXS50ZXh0Q29udGVudCA9IFwiZXhwYW5kX21vcmVcIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoaWRlRHJvcGRvd25MaW5rcyA9IChlKSA9PiB7XG4gICAgQXJyYXkuZnJvbShkcm9wZG93bkxpc3RzKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpZiAoaXRlbSAhPT0gZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nICYmXG4gICAgICAgICAgIWUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICAgICAgXCJkcm9wZG93bi1saW5rc1wiKVxuICAgICAgKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY2hlY2tBcmlhRXhwYW5kZWQoKTtcbiAgfTtcblxuICBjb25zdCB0b2dnbGVEcm9wZG93bkxpbmtzID0gKGUpID0+IHtcbiAgICBjb25zdCBkcm9wZG93bkxpc3QgPSBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgZHJvcGRvd25MaXN0LmNsYXNzTGlzdC50b2dnbGUoXCJ2aXNpYmxlXCIpO1xuICAgIGNoZWNrQXJpYUV4cGFuZGVkKCk7XG4gIH07XG5cbiAgQXJyYXkuZnJvbShkcm9wZG93bkJ1dHRvbnMpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaGlkZURyb3Bkb3duTGlua3MoZSk7XG4gICAgICB0b2dnbGVEcm9wZG93bkxpbmtzKGUpO1xuICAgIH0pO1xuICB9KTtcblxuICBBcnJheS5mcm9tKGRyb3Bkb3duQnV0dG9ucykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gXCIgXCIgfHwgZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGhpZGVEcm9wZG93bkxpbmtzKGUpO1xuICAgICAgICB0b2dnbGVEcm9wZG93bkxpbmtzKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkcm9wZG93bi1idXR0b25cIikpIHtcbiAgICAgIEFycmF5LmZyb20oZHJvcGRvd25MaXN0cykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNoZWNrQXJpYUV4cGFuZGVkKCk7XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgQXJyYXkuZnJvbShkcm9wZG93bkxpc3RzKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNoZWNrQXJpYUV4cGFuZGVkKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgY29uc3QgdHJhcEZvY3VzID0gKGUpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpc2libGVcIik7XG4gICAgaWYgKGN1cnJlbnREcm9wZG93bikge1xuICAgICAgY29uc3QgY3VycmVudExpc3QgPSBjdXJyZW50RHJvcGRvd24uY2hpbGRyZW47XG4gICAgICBjb25zdCBsYXN0SXRlbSA9IGN1cnJlbnRMaXN0W2N1cnJlbnRMaXN0Lmxlbmd0aCAtIDFdLmNoaWxkcmVuWzBdO1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3RJdGVtICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGN1cnJlbnREcm9wZG93bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmZvY3VzKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gXG4gICAgICAgICAgICBjdXJyZW50RHJvcGRvd24ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlLnNoaWZ0S2V5KSBcbiAgICAgIHtcbiAgICAgICAgbGFzdEl0ZW0uZm9jdXMoKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfTtcbiAgICB9O1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICB0cmFwRm9jdXMoZSk7XG4gICAgfVxuICB9KVxuXG59KSgpO1xuXG5leHBvcnQgeyB1cHBlck5hdkxpbmtzIH0iLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgaW1hZ2VTbGlkZXIgPSAoKCkgPT4ge1xuICBjb25zdCBpbWFnZXMgPSBbXG4gICAge1xuICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMva2F0ZS1zdG9uZS1tYXRoZXNvbi11eTV0LUNKdUlLNC11bnNwbGFzaC5qcGdcIixcbiAgICAgIGFsdDogXCJBIG1vc3RseSB3aGl0ZSBjYXQgc2xlZXBpbmcgYmVuZWF0aCBiZWQgY292ZXJzLlwiLFxuICAgICAgXCJjcmVkaXQgbGlua1wiOiBcImh0dHBzOi8vdW5zcGxhc2guY29tL0Brc3RvbmVtYXRoZXNvblwiLFxuICAgICAgXCJjcmVkaXQgbmFtZVwiOiBcIkthdGUgU3RvbmUgTWF0aGVzb24gb24gVW5zcGxhc2hcIlxuICAgIH0sXG4gICAge1xuICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMvZGFyaWEtc2hhdG92YS00NlR2TS1CVnJSSS11bnNwbGFzaC5qcGdcIixcbiAgICAgIGFsdDogXCJBIHNtYWxsIGNhdCBsYXlpbmcgdXBzaWRlIGRvd24sIHN0YXJpbmcgaW50byB0aGUgY2FtZXJhIHdpdGggdGhlaXIgcGF3cyBzdHJldGNoZWQgb3V0LlwiLFxuICAgICAgXCJjcmVkaXQgbGlua1wiOiBcImh0dHBzOi8vdW5zcGxhc2guY29tL0BkYXJpYXNoYTkxMVwiLFxuICAgICAgXCJjcmVkaXQgbmFtZVwiOiBcIkRhcmlhIFNoYXRvdmEgb24gVW5zcGxhc2hcIlxuICAgIH0sXG4gICAge1xuICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMvamFlLXBhcmstN0dYNWFJQ2I1aTQtdW5zcGxhc2guanBnXCIsXG4gICAgICBhbHQ6IFwiQSB3aGl0ZSBhbmQgdGFuIGNhdCBsb29raW5nIGludG8gdGhlIGNhbWVyYSB3aXRoIHRoZWlyIG1vdXRoIG9wZW4gbWlkLW1lb3cuXCIsXG4gICAgICBcImNyZWRpdCBsaW5rXCI6IFwiaHR0cHM6Ly91bnNwbGFzaC5jb20vQGphZWh1bnBhcmtcIixcbiAgICAgIFwiY3JlZGl0IG5hbWVcIjogXCJKYWUgUGFyayBvbiBVbnNwbGFzaFwiXG4gICAgfSxcbiAgICB7XG4gICAgICB1cmw6IFwiYXNzZXRzL2ltYWdlcy9qdXN0aW4tc2luY2xhaXItMHB0T0ZhdU43bjgtdW5zcGxhc2guanBnXCIsXG4gICAgICBhbHQ6IFwiVHdvIGNhbGljbyBjYXRzLCBvbmUgd2Fsa2luZyB0b3dhcmRzIHRoZSBjYW1lcmEgYW5kIHRoZSBvdGhlciBzaXR0aW5nIGFuZCBzdGFyaW5nIGF0IGEgd2FsbC5cIixcbiAgICAgIFwiY3JlZGl0IGxpbmtcIjogXCJodHRwczovL3Vuc3BsYXNoLmNvbS9AanVzdGluc2luY2xhaXJcIixcbiAgICAgIFwiY3JlZGl0IG5hbWVcIjogXCJKdXN0aW4gU2luY2xhaXIgb24gVW5zcGxhc2hcIlxuICAgIH0sXG4gICAge1xuICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMvbWFya28tYmxhemV2aWMtekJ2VnVSSjcxdlUtdW5zcGxhc2guanBnXCIsXG4gICAgICBhbHQ6IFwiQSBncmF5IGNhdCBzdGFuZGluZyBvbiB0aGVpciBoaW5kIGxlZ3MsIHdpdGggdGhlaXIgZnJvbnQgcGF3cyBiZW50IGluIGZyb250IG9mIHRoZW0uXCIsXG4gICAgICBcImNyZWRpdCBsaW5rXCI6IFwiaHR0cHM6Ly91bnNwbGFzaC5jb20vQGtlcmJlclwiLFxuICAgICAgXCJjcmVkaXQgbmFtZVwiOiBcIk1hcmtvIEJsYcW+ZXZpxIcgb24gVW5zcGxhc2hcIlxuICAgIH0sXG4gIF07XG5cbiAgaW1hZ2VzLmZvckVhY2goKGltYWdlLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGRvdC5jbGFzc05hbWUgPSBcImRvdFwiO1xuICAgIGRvdC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYnV0dG9uXCIpO1xuICAgIGRvdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgZG90LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgYHNlbGVjdCBpbWFnZSAke2luZGV4ICsgMX1gKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlci1kb3RzXCIpLmFwcGVuZENoaWxkKGRvdCk7XG4gIH0pXG5cbiAgY29uc3QgZG90cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkb3RcIik7XG4gIGNvbnN0IHNldEFjdGl2ZURvdCA9IChpbmRleElucHV0KSA9PiB7XG4gICAgQXJyYXkuZnJvbShkb3RzKS5mb3JFYWNoKChkb3QpID0+IHtcbiAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWRvdFwiKTtcbiAgICB9KTtcbiAgICBkb3RzW2luZGV4SW5wdXRdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtZG90XCIpO1xuICB9O1xuXG4gIGNvbnN0IHNlbGVjdEltYWdlQnlEb3QgPSAoc2VsZWN0aW9uLCBlKSA9PiB7XG4gICAgaW1hZ2VJbmRleCA9IHNlbGVjdGlvbjtcbiAgICByZXNldEN5Y2xlKCk7XG4gIH07XG5cbiAgQXJyYXkuZnJvbShkb3RzKS5mb3JFYWNoKChkb3QsIGluZGV4KSA9PiB7XG4gICAgZG90LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzZWxlY3RJbWFnZUJ5RG90KGluZGV4KTtcbiAgICB9KTtcblxuICAgIGRvdC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSBcIiBcIiB8fCBlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2VsZWN0SW1hZ2VCeURvdChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV4dC1hcnJvd1wiKTtcbiAgY29uc3QgcHJldmlvdXNBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJldmlvdXMtYXJyb3dcIik7XG4gIGNvbnN0IHNlbGVjdEltYWdlQnlBcnJvdyA9IChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ID09PSBuZXh0QXJyb3cpIHtcbiAgICAgIGluY3JlYXNlSW1hZ2VJbmRleCgpO1xuICAgICAgcmVzZXRDeWNsZSgpO1xuICAgIH0gZWxzZSBpZiAoZS5jdXJyZW50VGFyZ2V0ID09PSBwcmV2aW91c0Fycm93KSB7XG4gICAgICBkZWNyZWFzZUltYWdlSW5kZXgoKTtcbiAgICAgIHJlc2V0Q3ljbGUoKTtcbiAgICB9XG4gIH07XG5cbiAgbmV4dEFycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxlY3RJbWFnZUJ5QXJyb3cpO1xuICBuZXh0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiIFwiIHx8IGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNlbGVjdEltYWdlQnlBcnJvdyhlKTtcbiAgICB9XG4gIH0pO1xuICBwcmV2aW91c0Fycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxlY3RJbWFnZUJ5QXJyb3cpO1xuICBwcmV2aW91c0Fycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIiBcIiB8fCBlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZWxlY3RJbWFnZUJ5QXJyb3coZSk7XG4gICAgfVxuICB9KTtcblxuICBsZXQgaW1hZ2VJbmRleCA9IDA7XG4gIGNvbnN0IGN1cnJlbnRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudC1pbWFnZVwiKTtcbiAgY29uc3QgZGlzcGxheUltYWdlID0gKCkgPT4ge1xuICAgIGNvbnN0IGltYWdlQ3JlZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVkaXQtbGlua1wiKTtcbiAgICBjdXJyZW50SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGltYWdlc1tpbWFnZUluZGV4XS51cmwpO1xuICAgIGN1cnJlbnRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgaW1hZ2VzW2ltYWdlSW5kZXhdLmFsdCk7XG4gICAgaW1hZ2VDcmVkaXQuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBpbWFnZXNbaW1hZ2VJbmRleF1bXCJjcmVkaXQgbGlua1wiXSk7XG4gICAgaW1hZ2VDcmVkaXQudGV4dENvbnRlbnQgPSBpbWFnZXNbaW1hZ2VJbmRleF1bXCJjcmVkaXQgbmFtZVwiXTtcblxuICAgIHNldEFjdGl2ZURvdChpbWFnZUluZGV4KTtcbiAgfTtcblxuICBjb25zdCBpbmNyZWFzZUltYWdlSW5kZXggPSAoKSA9PiB7XG4gICAgaWYgKGltYWdlSW5kZXggPT09IGltYWdlcy5sZW5ndGggLSAxKSB7XG4gICAgICBpbWFnZUluZGV4ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW1hZ2VJbmRleCsrO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgZGVjcmVhc2VJbWFnZUluZGV4ID0gKCkgPT4ge1xuICAgIGlmIChpbWFnZUluZGV4ID09PSAwKSB7XG4gICAgICBpbWFnZUluZGV4ID0gaW1hZ2VzLmxlbmd0aCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGltYWdlSW5kZXggLT0gMTtcbiAgICB9O1xuICB9O1xuXG4gIGxldCBjeWNsZVN0YXRlO1xuICBjb25zdCBjaGFuZ2VDeWNsZVN0YXRlID0gKGUpID0+IHtcbiAgICBpZiAoIWN5Y2xlU3RhdGUpIHtcbiAgICAgIGN5Y2xlU3RhdGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5jcmVhc2VJbWFnZUluZGV4KCk7XG4gICAgICAgIGRpc3BsYXlJbWFnZSgpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoY3ljbGVTdGF0ZSk7XG4gICAgICBjeWNsZVN0YXRlID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXRDeWNsZSA9ICgpID0+IHtcbiAgICBpZiAoY3ljbGVTdGF0ZSkge1xuICAgICAgY2hhbmdlQ3ljbGVTdGF0ZSgpO1xuICAgIH07XG4gICAgZGlzcGxheUltYWdlKCk7XG4gICAgY2hhbmdlQ3ljbGVTdGF0ZSgpO1xuICB9XG5cbiAgLy8gcnVuIGZpcnN0IHNsaWRlIGFuZCBzdGFydCBjeWNsZSBvbiBwYWdlIGxvYWRcbiAgZGlzcGxheUltYWdlKCk7XG4gIGNoYW5nZUN5Y2xlU3RhdGUoKTtcblxuICBjdXJyZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZUN5Y2xlU3RhdGUpO1xuICBjdXJyZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiIFwiIHx8IGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNoYW5nZUN5Y2xlU3RhdGUoZSk7XG4gICAgfVxuICB9KVxufSkoKTtcblxuZXhwb3J0IHsgaW1hZ2VTbGlkZXIgfSIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgXCIuL3N0eWxlcy5jc3NcIjtcbmltcG9ydCB7IHVwcGVyTmF2TGlua3MgfSBmcm9tIFwiLi9uYXZiYXJcIjtcbmltcG9ydCB7IGltYWdlU2xpZGVyIH0gZnJvbSBcIi4vaW1hZ2Utc2xpZGVyXCI7XG5cbmNvbnN0IHRoZW1lT3B0aW9ucyA9ICgoKSA9PiB7XG4gIGNvbnN0IHRoZW1lVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aGVtZS10b2dnbGVcIik7XG4gIGNvbnN0IGdpdGh1YkxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdpdGh1Yi1sb2dvXCIpO1xuXG4gIGNvbnN0IGNoYW5nZVRoZW1lID0gKCkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGhlbWVcIikgPT09IFwiZGFya1wiKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGhlbWVcIiwgXCJsaWdodFwiKTtcbiAgICAgIGdpdGh1YkxvZ28uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiYXNzZXRzL0dpdEh1Yi1NYXJrLTMycHgucG5nXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGhlbWVcIiwgXCJkYXJrXCIpO1xuICAgICAgZ2l0aHViTG9nby5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJhc3NldHMvR2l0SHViLU1hcmstTGlnaHQtMzJweC5wbmdcIik7XG4gICAgfTtcbiAgfTtcblxuICBjaGFuZ2VUaGVtZSgpO1xuICB0aGVtZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hhbmdlVGhlbWUpO1xuICB0aGVtZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCIgXCIgfHwgZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY2hhbmdlVGhlbWUoKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==